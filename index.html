<!DOCTYPE html>
<html lang="en">
<head>
  <style>
  body {
    background: #f7f7f7;
    margin: 0;
    padding: 10px;
    font-family: "Noto Sans", sans-serif;
  }
  #forum-box {
    max-width: 650px;
    margin: 20px auto;
    background: #fff;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }
  h1 {
    font-size: 1.4em;
    text-align: center;
  }
</style>

<meta charset="UTF-8">
<meta name="description" content="Forum komuniti skateboard Malaysia. Sertai perbincangan dalam Bahasa Melayu, English, dan ä¸­æ–‡.">
<meta name="keywords" content="skateboard, forum, malaysia, ä¸­æ–‡, bahasa melayu, english">
<meta name="author" content="Skateboard.my">
<title>Skateboard Forum</title>
</head>
<body>
  <div id="forum-box">
  <h1 id="pageTitle">ğŸ’¬ Forum</h1>
  <!--
  <div>
    <button onclick="switchLang('en')">English</button>
    <button onclick="switchLang('ms')">Bahasa Melayu</button>
    <button onclick="switchLang('zh_CN')">ä¸­æ–‡</button>
  </div>
  -->
  <div id="disqus_thread"></div>
  </div>
  <script>
  // è‡ªå‹•èªè¨€åµæ¸¬ + æœ¬åœ°è¨­å®š
  let userLang = localStorage.getItem('lang') || 
                 (navigator.language.startsWith('zh') ? 'zh_CN' :
                  navigator.language.startsWith('ms') ? 'ms' : 'en');

  // æ ¹æ“šèªè¨€æ”¹é é¢æ¨™é¡Œ
  const titles = { en: "ğŸ’¬ Skateboard.my Forum", ms: "ğŸ’¬ Forum Skateboard.my", zh_CN: "ğŸ’¬ Skateboard.my æ»‘æ¿è®ºå›" };
  document.getElementById('pageTitle').innerText = titles[userLang] || titles['en'];

  // å»ºç«‹ disqus_config
  var disqus_config = function () {
    this.page.url = window.location.href;
    //this.page.identifier = window.location.pathname;

    // æ ¹æ“š URL åˆ¤æ–·æ˜¯å¦æœ‰æŒ‡å®šç‰ˆï¼ˆä¾‹å¦‚ /forum/tech æˆ– /topic/streetï¼‰
    var path = window.location.pathname;

    // è‹¥ path å¤ªçŸ­ï¼ˆä¾‹å¦‚åªæ˜¯ "/" æˆ– "/forum"ï¼‰ï¼Œä½¿ç”¨ä¸»ç‰ˆ "sk-main"
    if (path === "/" || path === "/forum" || path === "/forum/") {
      this.page.identifier = "sk-main";
    } else {
      // å¦å‰‡ç”¨ç›®å‰è·¯å¾‘ä½œç‚ºç‰ˆçš„è­˜åˆ¥ç¢¼
      this.page.identifier = path.replace(/\//g, "-").replace(/^-|-$/g, "");
    }

    this.language = userLang;
  };

  // è¼‰å…¥ Disqus
  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://skateboard-my.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();

  // åˆ‡æ›èªè¨€
  function switchLang(lang) {
    localStorage.setItem('lang', lang);
    location.reload();
  }
  

    
  </script>

  <script>
(function() {
  // ç™¼é€ç•¶å‰ document.body çš„é«˜åº¦çµ¦ parent
  function sendHeight() {
    var h = Math.max(
      document.documentElement.scrollHeight,
      document.documentElement.offsetHeight,
      document.body.scrollHeight,
      document.body.offsetHeight
    );
    // ç”¨ window.parent.postMessage å‚³é«˜åº¦ï¼ˆå­—ä¸²æˆ–ç‰©ä»¶ï¼‰
    window.parent.postMessage({ type: 'setHeight', height: h }, '*');
  }

  // 1) é€ä¸€æ¬¡è¼‰å…¥é«˜åº¦
  window.addEventListener('load', function() {
    sendHeight();
  });

  // 2) ç•¶è¦–çª—æ”¹è®Šå¤§å°æ™‚å†é€ä¸€æ¬¡
  window.addEventListener('resize', function() {
    sendHeight();
  });

  // 3) ç›£æ§ DOM è®Šå‹•ï¼ˆä¾‹å¦‚ Disqus è¼‰å…¥ã€åœ–ç‰‡æˆ–å‹•æ…‹å…§å®¹ï¼‰
  var mo = new MutationObserver(function(mutations) {
    // ç°¡å–® debounceï¼šç­‰ 200ms å†é€
    if (typeof window.__resizeTimer !== 'undefined') clearTimeout(window.__resizeTimer);
    window.__resizeTimer = setTimeout(function() {
      sendHeight();
    }, 200);
  });
  mo.observe(document.body, { childList: true, subtree: true, characterData: true });

  // 4) ä¹Ÿå¯ä»¥æ¯ç§’é€ä¸€æ¬¡ï¼ˆä¿éšªï¼‰ï¼Œè¦–æƒ…æ³é—œæ‰
  var interval = setInterval(sendHeight, 1500);

  // å¦‚æœéœ€è¦å¯ä»¥æä¾›ä¸€å€‹å®‰å…¨æ©Ÿåˆ¶ä¾†åªæ¥å—ä¾†è‡ªç‰¹å®š parentï¼Œ
  // ä¾‹å¦‚åœ¨ postMessage å‚³å›ä¾†æ™‚æª¢æŸ¥ event.originï¼ˆchild ä¸éœ€è¦æ­¤æ®µï¼‰
})();
</script>

</body>
</html>



